(self.webpackChunkcd_user=self.webpackChunkcd_user||[]).push([[336,3193],{5574:(S,b,s)=>{s.r(b),s.d(b,{GroupModule:()=>j});var g=s(9354),m=s(5662),t=s(2264);let f=(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-list"]],decls:2,vars:0,template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"list works!"),t.\u0275\u0275elementEnd())}})}return o})(),h=(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-edit"]],decls:2,vars:0,template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"edit works!"),t.\u0275\u0275elementEnd())}})}return o})(),v=(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-delete"]],decls:2,vars:0,template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"delete works!"),t.\u0275\u0275elementEnd())}})}return o})();var e=s(4178),l=s(2952),u=s(4866);const p=new e.FormsService,i=[{title:"ID",name:"groupId",dbName:"group_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum"},{title:"Guid",name:"groupGuid",dbName:"group_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"groupName",dbName:"group_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[l.Validators.minLength(3),l.Validators.maxLength(20),l.Validators.required]]},{title:"Company",name:"companyId",dbName:"company_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,u.of)([]),selValueField:"companyName",selIndex:"companyId",selPlaceholder:"...Choose",data:null},formatt:"text",disabled:!0,savable:!0,formControlsConfig:["",[l.Validators.minLength(3),l.Validators.maxLength(42),l.Validators.required]]},{title:"Enabled",name:"groupEnabled",dbName:"group_enabled",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm}],Fn:"createGroup"},{title:"Search",name:"iconSearch",type:e.FieldType.any,controls:[],formControlsConfig:["",[]]}],C={data:{},valid:null,ctx:"Sys"},y={token:"",stepTitle:"Create Group",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"groupInfo",cardTitle:"Group Information",cardTitleDesc:"Fill all information below",module:"Moduleman",controller:"Group",formGroup:null,fields:p.filterByFieldFor(i,e.FieldFor.createForm)},I={name:"Group Wizard",steps:[y]};var G=s(467);let D=(()=>{class o{svBase;svModuleman;svCdObj;constructor(n,r,a){this.svBase=n,this.svModuleman=r,this.svCdObj=a}loadDdls(n,r){var a=this;return(0,G.A)(function*(){e.companyDdlCtx.token=n.token,e.companyDdlCtx.step=r,e.companyDdlCtx.controlName="companyId",console.log("ConsumerModService::loadDdls()/companyGetQuery:",e.companyGetQuery),e.companyDdlCtx.getFn$=a.svBase.getPaged$(e.companyGetQuery,n.token,"Sys","Moduleman","Company"),yield a.svModuleman.setDdl$(yield e.companyDdlCtx).subscribe(c=>{console.log("group/ConsumerModService::loadDdls()/ret(companies):",c),r.fields.forEach(d=>{"companyId"===d.name&&(d.ddlInfo.data=c)})})})()}static \u0275fac=function(r){return new(r||o)(t.\u0275\u0275inject(e.BaseService),t.\u0275\u0275inject(e.ModulemanService),t.\u0275\u0275inject(e.CdObjService))};static \u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var M=s(777);const w=[{path:"list",component:f},{path:"edit",component:h},{path:"delete",component:v},{path:"create",component:(()=>{class o{aRoute;router;svServer;svGroup;svAcl;svForm;svNotif;fb;svForms;svPage;svPush;svBase;svSess;baseModel;groupStep;newGroup=C;groupData;wizardModel=I;constructor(n,r,a,c,d,N,E,k,P,A,B,L,z){this.aRoute=n,this.router=r,this.svServer=a,this.svGroup=c,this.svAcl=d,this.svForm=N,this.svNotif=E,this.fb=k,this.svForms=P,this.svPage=A,this.svPush=B,this.svBase=L,this.svSess=z,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(n=>{this.svAcl.initComponent(n,this,this.svSess).then(r=>{r&&(this.svPush.init(this),this.baseModel.data.step.token=this.baseModel.token)})})}ngAfterViewInit(){this.svGroup.loadDdls(this.baseModel,this.baseModel.data.step).then(n=>{console.log("group/CreateComponent::ngAfterViewInit()/this.baseModel.data.step:",this.baseModel.data.step)})}init(){this.baseModel=new e.BaseModel(y.module,y.controller),this.baseModel.data.fields=this.svForms.filterByFieldFor(i,e.FieldFor.createForm),this.baseModel.data.wizardModel=I,this.baseModel.data.step=this.svForm.filterStepsByController(this.baseModel.data.wizardModel,y.controller)[0],this.baseModel.data.form=this.fb.group(this.svForm.getFormControlConfig(i)),this.baseModel.data.step.formGroup=this.baseModel.data.form,this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(y.controller,"Create")}setSelectedIcon(n){this.svForm.setSelectedIcon(n,this.baseModel,this.baseModel.data.step)}save(n){switch(console.log("group/CreateComponent::save()/01"),console.log("group/CreateComponent::save()/step:",n),n.controller){case"module":case"menu":break;case"Group":if(console.log("group/CreateComponent::save()/handling group"),console.log("group/CreateComponent::save()/step.formGroup.value:",n.formGroup.value),"VALID"===n.formGroup.status){console.log("group/CreateComponent::save()/validation success");let a={ctx:"Sys",m:"Moduleman",c:"Group",a:"Create",dat:{f_vals:[{data:{}}],token:""},args:{}};a.dat.f_vals[0].data={...n.formGroup.value},a.dat.token=this.baseModel.token,console.log("group/CreateComponent::save()/env:",a),this.svServer.proc(a).subscribe(c=>{console.log("group/CreateComponent::save()/Group/resp:",c)})}else console.log("group/CreateComponent::save()/Validation Error orccured")}}finishFunction(){console.log("finishing!!")}static \u0275fac=function(r){return new(r||o)(t.\u0275\u0275directiveInject(m.ActivatedRoute),t.\u0275\u0275directiveInject(m.Router),t.\u0275\u0275directiveInject(e.ServerService),t.\u0275\u0275directiveInject(D),t.\u0275\u0275directiveInject(e.AclService),t.\u0275\u0275directiveInject(e.FormsService),t.\u0275\u0275directiveInject(e.NotificationService),t.\u0275\u0275directiveInject(l.FormBuilder),t.\u0275\u0275directiveInject(e.FormsService),t.\u0275\u0275directiveInject(M.PageService),t.\u0275\u0275directiveInject(e.CdPushService),t.\u0275\u0275directiveInject(e.BaseService),t.\u0275\u0275directiveInject(e.SessService))};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-create"]],decls:1,vars:2,consts:[[3,"saveEmitter","relaySelIconEmitter","baseModel","wizardModel"]],template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"naz-table-create",0),t.\u0275\u0275listener("saveEmitter",function(d){return a.save(d)})("relaySelIconEmitter",function(d){return a.setSelectedIcon(d)}),t.\u0275\u0275elementEnd()),2&r&&t.\u0275\u0275property("baseModel",a.baseModel)("wizardModel",a.wizardModel)}})}return o})()},{path:"dashboard",component:(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"dashboard works!"),t.\u0275\u0275elementEnd())}})}return o})()}];let x=(()=>{class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=t.\u0275\u0275defineNgModule({type:o});static \u0275inj=t.\u0275\u0275defineInjector({imports:[m.RouterModule.forChild(w),m.RouterModule]})}return o})(),j=(()=>{class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=t.\u0275\u0275defineNgModule({type:o});static \u0275inj=t.\u0275\u0275defineInjector({imports:[g.CommonModule,x,M.NazTableModule]})}return o})()},467:(S,b,s)=>{function g(t,f,h,v,e,l,u){try{var p=t[l](u),i=p.value}catch(C){return void h(C)}p.done?f(i):Promise.resolve(i).then(v,e)}function m(t){return function(){var f=this,h=arguments;return new Promise(function(v,e){var l=t.apply(f,h);function u(i){g(l,v,e,u,p,"next",i)}function p(i){g(l,v,e,u,p,"throw",i)}u(void 0)})}}s.d(b,{A:()=>m})}}]);