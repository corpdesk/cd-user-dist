(self.webpackChunkcd_user=self.webpackChunkcd_user||[]).push([[3193],{5574:(z,f,s)=>{s.r(f),s.d(f,{GroupModule:()=>x});var b=s(9354),p=s(5662),t=s(2264);let g=(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-list"]],decls:2,vars:0,template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"list works!"),t.\u0275\u0275elementEnd())}})}return o})(),C=(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-edit"]],decls:2,vars:0,template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"edit works!"),t.\u0275\u0275elementEnd())}})}return o})(),F=(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-delete"]],decls:2,vars:0,template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"delete works!"),t.\u0275\u0275elementEnd())}})}return o})();var e=s(4178),c=s(2952),I=s(4866);const T=new e.FormsService,u=[{title:"ID",name:"groupId",dbName:"group_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum"},{title:"Guid",name:"groupGuid",dbName:"group_guid",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"groupName",dbName:"group_name",type:e.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.createForm},{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[c.Validators.minLength(3),c.Validators.maxLength(20),c.Validators.required]]},{title:"Company",name:"companyId",dbName:"company_id",type:e.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:e.ControlType.text,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.searchDropDown,fieldFor:e.FieldFor.createForm}],ddlInfo:{selData$:(0,I.of)([]),selValueField:"companyName",selIndex:"companyId",selPlaceholder:"...Choose",data:null},formatt:"text",disabled:!0,savable:!0,formControlsConfig:["",[c.Validators.minLength(3),c.Validators.maxLength(42),c.Validators.required]]},{title:"Enabled",name:"groupEnabled",dbName:"group_enabled",type:e.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:e.ControlType.status,fieldFor:e.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Action",name:"action",type:e.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:e.ControlType.action,fieldFor:e.FieldFor.tableDisplay},{controlType:e.ControlType.action,fieldFor:e.FieldFor.createForm}],Fn:"createGroup"},{title:"Search",name:"iconSearch",type:e.FieldType.any,controls:[],formControlsConfig:["",[]]}],M={data:{},valid:null,ctx:"Sys"},d={token:"",stepTitle:"Create Group",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"groupInfo",cardTitle:"Group Information",cardTitleDesc:"Fill all information below",module:"Moduleman",controller:"Group",formGroup:null,fields:T.filterByFieldFor(u,e.FieldFor.createForm)},h={name:"Group Wizard",steps:[d]};var S=s(467);let G=(()=>{class o{svBase;svModuleman;svCdObj;constructor(n,r,a){this.svBase=n,this.svModuleman=r,this.svCdObj=a}loadDdls(n,r){var a=this;return(0,S.A)(function*(){e.companyDdlCtx.token=n.token,e.companyDdlCtx.step=r,e.companyDdlCtx.controlName="companyId",console.log("ConsumerModService::loadDdls()/companyGetQuery:",e.companyGetQuery),e.companyDdlCtx.getFn$=a.svBase.getPaged$(e.companyGetQuery,n.token,"Sys","Moduleman","Company"),yield a.svModuleman.setDdl$(yield e.companyDdlCtx).subscribe(l=>{console.log("group/ConsumerModService::loadDdls()/ret(companies):",l),r.fields.forEach(i=>{"companyId"===i.name&&(i.ddlInfo.data=l)})})})()}static \u0275fac=function(r){return new(r||o)(t.\u0275\u0275inject(e.BaseService),t.\u0275\u0275inject(e.ModulemanService),t.\u0275\u0275inject(e.CdObjService))};static \u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var y=s(777);const D=[{path:"list",component:g},{path:"edit",component:C},{path:"delete",component:F},{path:"create",component:(()=>{class o{aRoute;router;svServer;svGroup;svAcl;svForm;svNotif;fb;svForms;svPage;svPush;svBase;svSess;baseModel;groupStep;newGroup=M;groupData;wizardModel=h;constructor(n,r,a,l,i,w,N,E,k,A,B,P,L){this.aRoute=n,this.router=r,this.svServer=a,this.svGroup=l,this.svAcl=i,this.svForm=w,this.svNotif=N,this.fb=E,this.svForms=k,this.svPage=A,this.svPush=B,this.svBase=P,this.svSess=L,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(n=>{this.svAcl.initComponent(n,this,this.svSess).then(r=>{r&&(this.svPush.init(this),this.baseModel.data.step.token=this.baseModel.token)})})}ngAfterViewInit(){this.svGroup.loadDdls(this.baseModel,this.baseModel.data.step).then(n=>{console.log("group/CreateComponent::ngAfterViewInit()/this.baseModel.data.step:",this.baseModel.data.step)})}init(){this.baseModel=new e.BaseModel(d.module,d.controller),this.baseModel.data.fields=this.svForms.filterByFieldFor(u,e.FieldFor.createForm),this.baseModel.data.wizardModel=h,this.baseModel.data.step=this.svForm.filterStepsByController(this.baseModel.data.wizardModel,d.controller)[0],this.baseModel.data.form=this.fb.group(this.svForm.getFormControlConfig(u)),this.baseModel.data.step.formGroup=this.baseModel.data.form,this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(d.controller,"Create")}setSelectedIcon(n){this.svForm.setSelectedIcon(n,this.baseModel,this.baseModel.data.step)}save(n){switch(console.log("group/CreateComponent::save()/01"),console.log("group/CreateComponent::save()/step:",n),n.controller){case"module":case"menu":break;case"Group":if(console.log("group/CreateComponent::save()/handling group"),console.log("group/CreateComponent::save()/step.formGroup.value:",n.formGroup.value),"VALID"===n.formGroup.status){console.log("group/CreateComponent::save()/validation success");let a={ctx:"Sys",m:"Moduleman",c:"Group",a:"Create",dat:{f_vals:[{data:{}}],token:""},args:{}};a.dat.f_vals[0].data={...n.formGroup.value},a.dat.token=this.baseModel.token,console.log("group/CreateComponent::save()/env:",a),this.svServer.proc(a).subscribe(l=>{console.log("group/CreateComponent::save()/Group/resp:",l)})}else console.log("group/CreateComponent::save()/Validation Error orccured")}}finishFunction(){console.log("finishing!!")}static \u0275fac=function(r){return new(r||o)(t.\u0275\u0275directiveInject(p.ActivatedRoute),t.\u0275\u0275directiveInject(p.Router),t.\u0275\u0275directiveInject(e.ServerService),t.\u0275\u0275directiveInject(G),t.\u0275\u0275directiveInject(e.AclService),t.\u0275\u0275directiveInject(e.FormsService),t.\u0275\u0275directiveInject(e.NotificationService),t.\u0275\u0275directiveInject(c.FormBuilder),t.\u0275\u0275directiveInject(e.FormsService),t.\u0275\u0275directiveInject(y.PageService),t.\u0275\u0275directiveInject(e.CdPushService),t.\u0275\u0275directiveInject(e.BaseService),t.\u0275\u0275directiveInject(e.SessService))};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-create"]],decls:1,vars:2,consts:[[3,"saveEmitter","relaySelIconEmitter","baseModel","wizardModel"]],template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"naz-table-create",0),t.\u0275\u0275listener("saveEmitter",function(i){return a.save(i)})("relaySelIconEmitter",function(i){return a.setSelectedIcon(i)}),t.\u0275\u0275elementEnd()),2&r&&t.\u0275\u0275property("baseModel",a.baseModel)("wizardModel",a.wizardModel)}})}return o})()},{path:"dashboard",component:(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"dashboard works!"),t.\u0275\u0275elementEnd())}})}return o})()}];let j=(()=>{class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=t.\u0275\u0275defineNgModule({type:o});static \u0275inj=t.\u0275\u0275defineInjector({imports:[p.RouterModule.forChild(D),p.RouterModule]})}return o})(),x=(()=>{class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=t.\u0275\u0275defineNgModule({type:o});static \u0275inj=t.\u0275\u0275defineInjector({imports:[b.CommonModule,j,y.NazTableModule]})}return o})()}}]);